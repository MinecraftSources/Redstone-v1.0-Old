language: java
jdk:
  - oraclejdk8

before_install: "git clone -b travis `git config --get remote.origin.url` target/travis"
script: "[ ${TRAVIS_PULL_REQUEST} = 'false' ] && mvn clean deploy --settings target/travis/settings.xml || mvn clean verify --settings target/travis/settings.xml"

branches:
  except:
    - travis

env:
  global:
    - secure: "XNSGjuDlSe9JE6I4b/DpGHdH212Xajl94Vbd96yZRdQIXyhp2t9Jm5DKHrsN41Sb4TCqR6dOy9o+6BRKuwVd8Uudh99bOLvNukDF4FIMVzLI+mu5JU0qetm72A1EmcLze3W7mcjMuuNQYOuXd9YeNy+c3byWiE3sSiR9Zh+DMSo="
    - secure: "R4wKW1Zs5HK7F/C4MOd4Rd44uw45yuPPUbboMrH5l3uqmJMuXglZHhKs98Zc1B9jImNzU+jgjtSqWIs9RxY/y11Nwi6nv0GEg17CDghj6oZN3PlN/o80FQ8fyYDXZ9TNAso1jMM62+yGi2Q5vbUzxLoO/9Uzddw/7Sk+uLlv8bQ="